<!DOCTYPE html>
<html>
<head>
    <title>Ulam Spiral with D3.js</title>
    <script src="http://cdnjs.cloudflare.com/ajax/libs/d3/3.4.13/d3.min.js" charset="utf-8"></script>
<style type="text/css">
			
			.axis path,
			.axis line {
				fill: none;
				stroke: black;
				shape-rendering: crispEdges;
			}
			
			.axis text {
				font-family: sans-serif;
				font-size: 11px;
			}

		</style>
	</head>
	<body>
	<script type="text/javascript">
		//Width and height
		var w = 1000;
		var h = 800;
		var padding = 30;
			
		//Dynamic, random dataset
		var dataset = [];					//Initialize empty array
		var numDataPoints = 15;				//Number of dummy data points to create
		var xMin = 350;
		var xMax = 800;
		var xRange = xMax - xMin;	//Max range of new x values
		var yRange = 100;	//Max range of new y values
		for (var i = 0; i < numDataPoints; i++) {					//Loop numDataPoints times
			var newNumber1 = xMin + i*(xRange/(numDataPoints-1));	//New random integer
			var newNumber2 = Math.round(Math.random() * yRange);	//New random integer
			dataset.push([newNumber1, newNumber2]);					//Add new number to array
		}

		//Create scale functions
		var xScale = d3.scale.linear()
			.domain([xMin, xMax])
			.range([padding, w - padding * 2]);
		var yScale = d3.scale.linear()
			.domain([0, 100])
			.range([h - padding, padding]);
		//Define X axis
		var xAxis = d3.svg.axis()
			.scale(xScale)
			.orient("bottom")
			.ticks(5);
		//Define Y axis
		var yAxis = d3.svg.axis()
			.scale(yScale)
			.orient("left")
			.ticks(5);

		//Create SVG element
		var svg = d3.select("body")
			.append("svg")
			.attr("width", w)
			.attr("height", h);
			
		var xCur = dataset[0][0];
		var yCur = dataset[0][1]
		var curvePath = "M" + xScale(xCur) + "," + yScale(yCur);
		for (i = 1; i < numDataPoints; i++) {					//Loop numDataPoints times
			xCur = xScale(dataset[i][0]);
			yCur = yScale(dataset[i][1]);
			curvePath = curvePath + "L" + xCur + "," + yCur; 
		}
		
		svg.append("g").append("path")
			.attr("d", curvePath)
			.attr("stroke","red")
			.attr("stroke-width",3)
			.attr("fill","none");
		
		//Create circles
		svg.selectAll("circle")
		   .data(dataset)
		   .enter()
		   .append("circle")
		   .attr("cx", function(d) {
		   		return xScale(d[0]);
		   })
		   .attr("cy", function(d) {
		   		return yScale(d[1]);
		   })
		   .attr("r", 3);
		
		
		//Create labels
		svg.selectAll("text")
		   .data(dataset)
		   .enter()
		   .append("text")
		   .text(function(d) {
		   		return Math.round(d[0]) + "," + Math.round(d[1]);
		   })
		   .attr("x", function(d) {
		   		return xScale(d[0]);
		   })
		   .attr("y", function(d) {
		   		return yScale(d[1]);
		   })
		   .attr("font-family", "sans-serif")
		   .attr("font-size", "11px")
		   .attr("fill", "red");
		
		//Create X axis
		svg.append("g")
			.attr("class", "axis")
			.attr("transform", "translate(0," + (h - padding) + ")")
			.call(xAxis);
		
		//Create Y axis
		svg.append("g")
			.attr("class", "axis")
			.attr("transform", "translate(" + padding + ",0)")
			.call(yAxis);

	</script>
</body>
</html>
